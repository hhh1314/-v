<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Liquid Glass 个人主页</title>
  <style>
    :root{
      --bg:#0b0f1a;
      --text:rgba(255,255,255,.92);
      --muted:rgba(255,255,255,.70);
      --line:rgba(255,255,255,.14);
      --glass:rgba(255,255,255,.08);
      --glass2:rgba(255,255,255,.06);
      --shadow: 0 30px 120px rgba(0,0,0,.55);
      --shadow2: 0 16px 50px rgba(0,0,0,.35);
      --radius:24px;
      --accent:#2563eb;
      --accent2:#7c3aed;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, "SF Pro Display","Segoe UI", Arial, "PingFang SC","Microsoft YaHei";
      color:var(--text);
      background: var(--bg);
      min-height:100vh;
      overflow-x:hidden;
    }

    /* 背景：流动渐变 + 玻璃光斑 */
    .bg{
      position:fixed; inset:0; z-index:-2;
      background:
        radial-gradient(900px 520px at 15% 10%, rgba(116, 87, 255, .28), transparent 60%),
        radial-gradient(760px 500px at 85% 15%, rgba(55, 221, 255, .18), transparent 60%),
        radial-gradient(900px 520px at 45% 110%, rgba(255, 95, 186, .16), transparent 60%),
        linear-gradient(180deg, #070a12 0%, #0b0f1a 60%, #070a12 100%);
      filter:saturate(1.1);
    }
    .blobs{
      position:fixed; inset:-20%; z-index:-1;
      background:
        radial-gradient(closest-side, rgba(116,87,255,.32), transparent 60%) 10% 20%/38% 38% no-repeat,
        radial-gradient(closest-side, rgba(55,221,255,.22), transparent 60%) 78% 15%/42% 42% no-repeat,
        radial-gradient(closest-side, rgba(255,95,186,.18), transparent 60%) 50% 85%/46% 46% no-repeat;
      animation: floaty 14s ease-in-out infinite alternate;
      opacity:.9;
      filter: blur(18px);
    }
    @keyframes floaty{
      0%{ transform: translate3d(-10px, -6px, 0) scale(1); }
      100%{ transform: translate3d(14px, 10px, 0) scale(1.02); }
    }
    /* 轻微噪点（液态玻璃质感） */
    .noise{
      pointer-events:none;
      position:fixed; inset:0; z-index:0;
      opacity:.08;
      mix-blend-mode: overlay;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='180' height='180'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='180' height='180' filter='url(%23n)' opacity='.65'/%3E%3C/svg%3E");
      background-size:180px 180px;
    }

    .wrap{max-width:1100px; margin:0 auto; padding:26px 16px 60px; position:relative; z-index:1;}

    /* 液态玻璃卡片 */
    .glass{
      position:relative;
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.05));
      border-radius: var(--radius);
      box-shadow: var(--shadow2);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      overflow:hidden;
    }
    .glass::before{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(600px 220px at 18% 12%, rgba(255,255,255,.18), transparent 60%),
        radial-gradient(520px 260px at 88% 18%, rgba(255,255,255,.10), transparent 62%);
      opacity:.9;
      pointer-events:none;
    }
    .glass::after{
      content:"";
      position:absolute; inset:0;
      background: linear-gradient(135deg, rgba(116,87,255,.10), rgba(55,221,255,.06), rgba(255,95,186,.06));
      opacity:.35;
      pointer-events:none;
      filter:saturate(1.2);
    }
    .inner{position:relative; z-index:1;}

    /* 顶部区 */
    .hero{ padding:22px; }
    .topbar{
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      margin-bottom:14px;
    }
    .brand{
      display:flex; align-items:center; gap:10px;
      color:var(--muted);
      font-size:14px;
      letter-spacing:.2px;
    }
    .dot{
      width:10px; height:10px; border-radius:999px;
      background: linear-gradient(135deg, rgba(116,87,255,1), rgba(55,221,255,1));
      box-shadow: 0 0 0 7px rgba(255,255,255,.06);
    }
    .actions{display:flex; gap:10px; flex-wrap:wrap}
    .btn{
      padding:10px 12px;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.06);
      color:var(--text);
      cursor:pointer;
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      transition: transform .12s ease, filter .12s ease;
      user-select:none;
      font-weight:600;
    }
    .btn:hover{filter:brightness(1.06)}
    .btn:active{transform: translateY(1px)}

    .heroGrid{
      display:grid;
      grid-template-columns: 1.25fr .75fr;
      gap:14px;
      align-items:stretch;
    }

    /* 左侧介绍 + 左上角照片入口 */
    .intro{
      position:relative;
      padding:18px 18px 20px;
      border-radius:22px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.10);
      overflow:hidden;
    }
    .intro::before{
      content:"";
      position:absolute; inset:-2px;
      background: radial-gradient(420px 180px at 20% 10%, rgba(255,255,255,.12), transparent 60%);
      pointer-events:none;
    }
    .cornerPhoto{
      position:absolute; left:14px; top:14px;
      width:74px; height:74px;
      border-radius:20px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.05);
      box-shadow: 0 18px 50px rgba(0,0,0,.35);
      cursor:pointer;
    }
    .cornerPhoto img{width:100%;height:100%;object-fit:cover;display:block}
    .cornerHint{
      position:absolute; left:96px; top:20px;
      padding:8px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.06);
      color:rgba(255,255,255,.80);
      font-size:13px;
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      white-space:nowrap;
    }
    h1{margin:86px 0 8px; font-size:44px; line-height:1.08; letter-spacing:-.6px;}
    .grad{
      background: linear-gradient(135deg, rgba(116,87,255,1), rgba(55,221,255,1), rgba(255,95,186,1));
      -webkit-background-clip:text; background-clip:text; color:transparent;
    }
    .sub{margin:0; color:var(--muted); max-width:62ch; font-size:15px}
    .chips{margin-top:14px; display:flex; gap:10px; flex-wrap:wrap}
    .chip{
      padding:7px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.05);
      color:rgba(255,255,255,.78);
      font-size:13px;
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
    }

    /* 右侧：天气 + 日历 */
    .side{display:grid; grid-template-rows:auto 1fr; gap:14px;}
    .widget{padding:16px; border-radius:22px; border:1px solid rgba(255,255,255,.14); background: rgba(0,0,0,.10); overflow:hidden; position:relative;}
    .widget::before{content:""; position:absolute; inset:-2px; background: radial-gradient(420px 180px at 20% 10%, rgba(255,255,255,.10), transparent 60%); pointer-events:none;}
    .wtitle{margin:0 0 10px; font-size:14px; color:rgba(255,255,255,.80); letter-spacing:.2px;}
    .wrow{display:flex; align-items:center; justify-content:space-between; gap:10px;}
    .bigNum{font-size:34px; font-weight:750; letter-spacing:-.5px;}
    .muted{color:var(--muted); font-size:13px}

    /* 日历 */
    .calTop{display:flex; align-items:center; justify-content:space-between; gap:10px; margin-bottom:10px;}
    .calLabel{font-weight:700; letter-spacing:.2px;}
    .calBtns{display:flex; gap:8px;}
    .iconBtn{
      width:36px;height:36px;border-radius:14px;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.06);
      color:var(--text);
      cursor:pointer;
      display:grid; place-items:center;
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
    }
    .week{display:grid; grid-template-columns: repeat(7, 1fr); gap:8px; margin-bottom:8px;}
    .wd{font-size:12px; color:rgba(255,255,255,.60); text-align:center;}
    .days{display:grid; grid-template-columns: repeat(7, 1fr); gap:8px;}
    .day{
      height:38px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      display:grid; place-items:center;
      font-size:13px;
      color:rgba(255,255,255,.85);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      user-select:none;
    }
    .day.off{opacity:.35}
    .day.today{
      border-color: rgba(55,221,255,.55);
      box-shadow: 0 10px 30px rgba(55,221,255,.18);
      background: rgba(55,221,255,.10);
      font-weight:750;
    }

    /* 相册弹窗（液态玻璃） */
    .modal{
      position:fixed; inset:0;
      display:none;
      align-items:center;justify-content:center;
      padding:16px;
      background: rgba(0,0,0,.55);
      z-index:10;
    }
    .panel{
      width:min(1080px,100%);
      border-radius:28px;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(18,24,38,.55);
      box-shadow: 0 40px 140px rgba(0,0,0,.65);
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
      overflow:hidden;
      position:relative;
    }
    .panel::before{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(520px 240px at 20% 10%, rgba(255,255,255,.16), transparent 60%),
        radial-gradient(520px 240px at 85% 18%, rgba(255,255,255,.10), transparent 62%),
        linear-gradient(135deg, rgba(116,87,255,.16), rgba(55,221,255,.10), rgba(255,95,186,.10));
      opacity:.7;
      pointer-events:none;
    }
    .panelInner{position:relative; z-index:1;}
    .bar{
      display:flex;align-items:center;justify-content:space-between;gap:10px;
      padding:12px 14px;
      border-bottom:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.05);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
    }
    .cap{font-size:14px;color:rgba(255,255,255,.80);font-weight:700}
    .controls{display:flex;gap:8px;flex-wrap:wrap}
    .btn2{
      padding:9px 12px;border-radius:16px;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.06);
      color:var(--text);
      cursor:pointer;
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      font-weight:650;
    }
    .viewer{padding:14px;}
    .big{
      width:100%;
      max-height:64vh;
      object-fit:contain;
      border-radius:22px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.22);
    }
    .thumbs{
      margin-top:12px;
      display:grid;
      grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
      gap:10px;
    }
    .thumb{
      border-radius:18px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      cursor:pointer;
      transition: transform .12s ease, filter .12s ease, border-color .12s ease;
    }
    .thumb:hover{transform: translateY(-1px); filter:brightness(1.06); border-color: rgba(55,221,255,.45);}
    .thumb img{width:100%;height:92px;object-fit:cover;display:block}
    .active{border-color: rgba(116,87,255,.55)!important}

    @media (max-width: 900px){
      .heroGrid{grid-template-columns:1fr}
      h1{font-size:38px}
    }
  </style>
</head>

<body>
  <div class="bg"></div>
  <div class="blobs"></div>
  <div class="noise"></div>

  <div class="wrap">
    <section class="glass hero">
      <div class="inner">
        <div class="topbar">
          <div class="brand"><span class="dot"></span><span>Liquid Glass · 个人主页</span></div>
          <div class="actions">
            <button class="btn" id="refreshWeather">刷新天气</button>
            <button class="btn" id="openGalleryTop">打开相册</button>
          </div>
        </div>

        <div class="heroGrid">
          <!-- 介绍 -->
          <div class="intro">
            <div class="cornerPhoto" id="openGallery" title="点击打开相册">
              <img id="miniImg" src="1.jpg" alt="封面">
            </div>
            <div class="cornerHint">点击照片 · 查看更多</div>

            <h1>你好，我是 <span class="grad">朱旭</span></h1>
            <p class="sub">这里写一句你的定位（摄影 / 旅行 / 设计 / 开发）。左上角照片可打开你的相册。</p>
            <div class="chips">
              <span class="chip">标签 1</span>
              <span class="chip">标签 2</span>
              <span class="chip">标签 3</span>
            </div>
          </div>

          <!-- 右侧：天气 + 日历 -->
          <div class="side">
            <!-- 天气 -->
            <div class="widget" id="weatherCard">
              <p class="wtitle">本地天气</p>
              <div class="wrow">
                <div>
                  <div class="bigNum" id="temp">--°</div>
                  <div class="muted" id="wdesc">等待定位…</div>
                </div>
                <div style="text-align:right">
                  <div class="muted" id="place">--</div>
                  <div class="muted" id="extra">--</div>
                </div>
              </div>
              <div style="margin-top:10px; display:flex; gap:10px; flex-wrap:wrap;">
                <span class="chip" id="hintHttps">提示：需要 HTTPS 才能自动定位</span>
                <span class="chip" id="manualHint">手动：在代码里填经纬度</span>
              </div>
            </div>

            <!-- 日历 -->
            <div class="widget">
              <div class="calTop">
                <div class="calLabel" id="calLabel">—</div>
                <div class="calBtns">
                  <button class="iconBtn" id="prevM" aria-label="上个月">‹</button>
                  <button class="iconBtn" id="nextM" aria-label="下个月">›</button>
                </div>
              </div>
              <div class="week">
                <div class="wd">日</div><div class="wd">一</div><div class="wd">二</div>
                <div class="wd">三</div><div class="wd">四</div><div class="wd">五</div><div class="wd">六</div>
              </div>
              <div class="days" id="days"></div>
              <div class="muted" style="margin-top:10px;">提示：可用键盘 ← → 切换相册照片</div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- 相册弹窗 -->
  <div class="modal" id="modal">
    <div class="panel">
      <div class="panelInner">
        <div class="bar">
          <div class="cap" id="caption">—</div>
          <div class="controls">
            <button class="btn2" id="prev">上一张</button>
            <button class="btn2" id="next">下一张</button>
            <button class="btn2" id="close">关闭</button>
          </div>
        </div>
        <div class="viewer">
          <img class="big" id="bigImg" alt="">
          <div class="thumbs" id="thumbs"></div>
        </div>
      </div>
    </div>
  </div>

  <script>
    /* ========= 相册：把图片和这个 html 放同一层：1.jpg 2.jpg 3.jpg... ========= */
    const photos = [
      {src:"1.jpg", title:"照片 1"},
      {src:"2.jpg", title:"照片 2"},
      {src:"3.jpg", title:"照片 3"},
      // 继续加：{src:"4.jpg", title:"照片 4"},
    ];

    const modal = document.getElementById("modal");
    const bigImg = document.getElementById("bigImg");
    const caption = document.getElementById("caption");
    const thumbs = document.getElementById("thumbs");
    const miniImg = document.getElementById("miniImg");
    let pi = 0;

    function showPhoto(idx){
      if(!photos.length) return;
      pi = (idx + photos.length) % photos.length;
      bigImg.src = photos[pi].src;
      caption.textContent = `${photos[pi].title}  (${pi+1}/${photos.length})`;
      [...thumbs.children].forEach((el, k)=> el.classList.toggle("active", k===pi));
    }

    if(photos.length) miniImg.src = photos[0].src;

    thumbs.innerHTML = photos.map((p,idx)=>`
      <div class="thumb" data-idx="${idx}"><img src="${p.src}" alt="${p.title}"></div>
    `).join("");

    thumbs.addEventListener("click", (e)=>{
      const box = e.target.closest(".thumb");
      if(!box) return;
      showPhoto(+box.dataset.idx);
    });

    function openGallery(){
      modal.style.display = "flex";
      showPhoto(pi || 0);
    }
    function closeGallery(){ modal.style.display = "none"; }

    document.getElementById("openGallery").onclick = openGallery;
    document.getElementById("openGalleryTop").onclick = openGallery;
    document.getElementById("close").onclick = closeGallery;
    document.getElementById("prev").onclick = ()=> showPhoto(pi-1);
    document.getElementById("next").onclick = ()=> showPhoto(pi+1);
    modal.addEventListener("click", (e)=>{ if(e.target===modal) closeGallery(); });

    document.addEventListener("keydown",(e)=>{
      if(modal.style.display!=="flex") return;
      if(e.key==="Escape") closeGallery();
      if(e.key==="ArrowLeft") showPhoto(pi-1);
      if(e.key==="ArrowRight") showPhoto(pi+1);
    });

    /* ========= 日历 ========= */
    const calLabel = document.getElementById("calLabel");
    const daysEl = document.getElementById("days");
    let view = new Date();

    function renderCalendar(){
      const y = view.getFullYear();
      const m = view.getMonth();
      calLabel.textContent = `${y} 年 ${m+1} 月`;

      const first = new Date(y, m, 1);
      const startDay = first.getDay(); // 0-6
      const lastDate = new Date(y, m+1, 0).getDate();

      const cells = [];

      for(let i=0;i<startDay;i++){
        cells.push({d: new Date(y, m, 1).getDate() - (startDay - 1 - i), off:true});
      }
      for(let d=1; d<=lastDate; d++){
        cells.push({d, off:false});
      }

      while(cells.length < 42){
        cells.push({d: cells.length - (startDay + lastDate) + 1, off:true, next:true});
      }

      const today = new Date();
      const isThisMonth = today.getFullYear()===y && today.getMonth()===m;

      daysEl.innerHTML = cells.map((c, idx)=>{
        const isToday = isThisMonth && !c.off && c.d===today.getDate();
        return `<div class="day ${c.off?'off':''} ${isToday?'today':''}">${c.d}</div>`;
      }).join("");
    }

    renderCalendar();

    document.getElementById("prevM").onclick = ()=>{
      view = new Date(view.getFullYear(), view.getMonth()-1, 1);
      renderCalendar();
    };
    document.getElementById("nextM").onclick = ()=>{
      view = new Date(view.getFullYear(), view.getMonth()+1, 1);
      renderCalendar();
    };

    /* ========= 天气（Open-Meteo，无需 key） =========
       - 自动定位失败时，你可以手动填经纬度：
         const MANUAL = { lat: 31.2304, lon: 121.4737, name: "上海" };
    */
    const tempEl  = document.getElementById("temp");
    const descEl  = document.getElementById("wdesc");
    const placeEl = document.getElementById("place");
    const extraEl = document.getElementById("extra");

    const codeToText = (code)=>{
      const map = {
        0:"晴朗",1:"大致晴",2:"少云",3:"多云",
        45:"雾",48:"雾凇",
        51:"小毛毛雨",53:"毛毛雨",55:"强毛毛雨",
        61:"小雨",63:"中雨",65:"大雨",
        71:"小雪",73:"中雪",75:"大雪",
        80:"阵雨",81:"强阵雨",82:"暴阵雨",
        95:"雷暴"
      };
      return map[code] || `天气代码 ${code}`;
    };

    async function fetchWeather(lat, lon, nameGuess){
      try{
        descEl.textContent = "获取天气中…";
        const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,apparent_temperature,weather_code,wind_speed_10m&timezone=auto`;
        const r = await fetch(url);
        const j = await r.json();
        const c = j.current;
        const t = Math.round(c.temperature_2m);
        const feel = Math.round(c.apparent_temperature);
        const wind = Math.round(c.wind_speed_10m);
        tempEl.textContent = `${t}°`;
        descEl.textContent = codeToText(c.weather_code);
        placeEl.textContent = nameGuess || `Lat ${lat.toFixed(2)}, Lon ${lon.toFixed(2)}`;
        extraEl.textContent = `体感 ${feel}° · 风 ${wind} km/h`;
      }catch(e){
        descEl.textContent = "天气获取失败（检查网络/HTTPS）";
        extraEl.textContent = "";
      }
    }

    function getWeather(){
      if(MANUAL){
        placeEl.textContent = MANUAL.name || "手动位置";
        return fetchWeather(MANUAL.lat, MANUAL.lon, MANUAL.name);
      }
      if(!("geolocation" in navigator)){
        descEl.textContent = "浏览器不支持定位";
        return;
      }
      navigator.geolocation.getCurrentPosition(
        (pos)=>{
          const {latitude, longitude} = pos.coords;
          fetchWeather(latitude, longitude, "你的当前位置");
        },
        ()=>{
          descEl.textContent = "定位失败：可在代码里手动填经纬度";
          extraEl.textContent = "";
          placeEl.textContent = "--";
        },
        { enableHighAccuracy:false, timeout:8000, maximumAge: 5*60*1000 }
      );
    }

    document.getElementById("refreshWeather").onclick = getWeather;
    getWeather();
  </script>
</body>
</html>
